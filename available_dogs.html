<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Available Dogs</title>
    <meta name="description" content="List of SC Sheltie Rescue dogs available for adoption.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/main.20131023.css"> <!-- Cache Busting: Update the # when you update main.css -->
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
  </head>
  <body>
    <!--[if lte IE 8]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div class="page-wrap">
      <div class="contain-to-grid sticky">
        <nav class="top-bar">
          <ul class="title-area">
            <!-- Title Area -->
            <li class="name">
              <h1 class="show-for-medium-up"><a href="index.html">South Carolina Sheltie Rescue</a></h1>
              <h1 class="show-for-small"><a href="index.html">SCSR</a></h1>
            </li>
            <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
            <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
          </ul>

          <section class="top-bar-section">
            <ul class="right">
              <li class="active"><a href="index.html">Home</a></li>
              <li class="has-dropdown"><a href="available_dogs.html">Adopt</a>
                <ul class="dropdown">
                  <!-- <li><a href="#">Adoption Requirements</a></li> -->
                  <li><a href="available_dogs.html">Adoptable Dogs</a></li>
                  <li><a href="apply_to_adopt.html">Adoption Application</a></li>
                  <li><a href="apply_to_foster.html">Fostering Application</a></li>
                </ul>
              </li>
              <li><a href="surrender.html">Surrender a Sheltie</a></li>
              <li><a href="help_and_advice.html">Help and Advice</a></li>
              <li><a href="events.html">Rescue Events</a></li>
            </ul>
          </section>
        </nav>
      </div>

      <div class="row">
        <div class="large-12 medium-12 small-12 columns">
          <main role="main" class="main-content">
            <h2 class="headline first">Available for Adoption</h2>
            <p>You can view our available dogs below or on our <a href="http://www.petfinder.com/pet-search?animal_type=&pet_breed=&pet_age=&pet_size=&specialNeeds=&declawedPets=&children=&status=&shelter_pet_id=&internal=&contact=&name=&shelter_id=SC92&sort=" target="_blank">Petfinder site</a>. If you are interested in adopting one of our rescue dogs, please copy and paste the <a href="apply_to_adopt.html">application</a> and send it to us via <a href="mailto:amanda@southcarolinasheltierescue.com">email</a>.</p>

            <div id="pets" class="clearfix"></div>
            <div id="spinner" class="loading_spinner"></div>

            <input id="btnMore" type="button" class="invisible" value="View More" />
          </main>
        </div>
      </div>
    </div>

    <footer class="main-footer">
      <p>
        <span class="name">SC Sheltie Rescue </span>
        <span class="po-box">P.O. Box 11414 </span>
        <span class="city-state-zip">Columbia, SC 29211 </span>
        <span class="tel">803.920.0644</span>
      </p>
    </footer>


    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      var currentOffset = 0;
      var opts = {
        lines: 13, // The number of lines to draw
        length: 20, // The length of each line
        width: 10, // The line thickness
        radius: 30, // The radius of the inner circle
        corners: 1, // Corner roundness (0..1)
        rotate: 0, // The rotation offset
        direction: 1, // 1: clockwise, -1: counterclockwise
        color: '#000', // #rgb or #rrggbb or array of colors
        speed: 0.7, // Rounds per second
        trail: 25, // Afterglow percentage
        shadow: false, // Whether to render a shadow
        hwaccel: false, // Whether to use hardware acceleration
        className: 'spinner', // The CSS class to assign to the spinner
        zIndex: 2e9, // The z-index (defaults to 2000000000)
        top: 'auto', // Top position relative to parent in px
        left: 'auto' // Left position relative to parent in px
      };
      var spinner_target = document.getElementById('spinner');
      var spinner = null;

      function spin_start() {
        spinner.spin(spinner_target);
      }

      function spin_stop() {
        spinner.stop();
      }

      /*
       * Call petfinder.php to get a list of available dogs. Then append to the HTML document.
       */
      function getPets() {
        var $btnMore = $("#btnMore");
        var $spinner = $("#spinner");
        var url = "petfinder.php";
        var data = {
          offset: currentOffset
        };

        if(!$btnMore.hasClass("invisible")) {
          $btnMore.addClass("invisible");
        }
        $spinner.show();
        if(!spinner) {
          spinner = new Spinner(opts).spin(spinner_target);
        } else {
          spin_start();
        }

        $.getJSON(url, data, function(resp) {
          currentOffset = parseInt(resp.petfinder.lastOffset.$t, 10);
          var pets = resp.petfinder.pets.pet;

          $(pets).each(function(i, item) {
            $("#pets").append(formatPet(item));
          });

          $spinner.hide();
          spin_stop();
          if(pets.length === 25) { // Pulled the maximum amount of pets
            $btnMore.removeClass("invisible");
          }
        }, "json");
      }

      /*
       * Format each pet HTML block.
       */
      function formatPet(pet) {
        var div = $("<div class='clearfix'></div>");
        var name = pet.name.$t;
        if(name === "Application") {
          return null;
        }
        $(div).append("<h3>"+name+"</h3>");
        var desc = $("<div class='clearfix'>"+pet.description.$t+"</div>");
        if(pet.media.photos && pet.media.photos.photo.length > 0)
        {
          var img = $("<img />")
          .attr("src", pet.media.photos.photo[0].$t)
          .attr("alt", name)
          .attr("align", "left")
          .css({
            border:"solid 2px gainsboro",
            padding:"3px",
            margin:"5px",
            width:"200px"
          });
          $(desc).prepend(img);
        }
        $("a", desc).attr("target", "_blank");
        $(div).append(desc).append("<hr />").css({padding: "4px", margin:"3px"});
        return div;
      }

      /*
       * Retrieve data on document ready.
       */
      $(document).ready(function() {
        getPets();
        $("#btnMore").click(function() {
          getPets();
        });
      });
    </script>
    <script>
      $(document)
        .foundation('dropdown topbar')
        .foundation('orbit', {
          animation: 'fade',
          timer_speed: 5000,
          pause_on_hover: true,
          resume_on_mouseout: true,
          animation_speed: 500,
          stack_on_small: true,
          navigation_arrows: true,
          slide_number: true,
          container_class: 'orbit-container',
          stack_on_small_class: 'orbit-stack-on-small',
          next_class: 'orbit-next',
          prev_class: 'orbit-prev',
          timer_container_class: 'orbit-timer',
          timer_paused_class: 'paused',
          timer_progress_class: 'orbit-progress',
          slides_container_class: 'orbit-slides-container',
          bullets_container_class: 'orbit-bullets',
          bullets_active_class: 'active',
          slide_number_class: 'orbit-slide-number',
          caption_class: 'orbit-caption',
          active_slide_class: 'active',
          orbit_transition_class: 'orbit-transitioning',
          bullets: true,
          timer: true,
          next_on_click: false,
          variable_height: false,
          before_slide_change: function(){},
          after_slide_change: function(){}
        });
    </script>
  </body>
</html>